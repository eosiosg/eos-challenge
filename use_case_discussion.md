# Use Cases
A typical use case of this challenge contract works as follows:
Several roles are involved:
- ETH user, who does not have EOS account.
- EOS user, who has an EOS account.
- ETH game developer, who wants to promote the game.
- EOS game platform, who wants to promote more games and attract more players.

The game platform has run a platform to promote EOS DApps and games for a long time, and a lot of EOS users have enjoyed playing games in the platform. Recently the platform want to introduce ETH games and attract more players from ETH community. But they need help to solve difficulties on both side. The ETH users are interest in no-gas-fee games, but frustrated at unfamiliar concepts of CPU/NET/RAM and a new set of tools to learn. On the other side, a lot of work need to be done, if not a complete re-write of the game contract, before the developer can port over from ETH to EOS, and even worse, the developer does not have experience in developing EOS contract.

This project is a perfect solution to address above difficulties. In order to remove the learning and using obstacles, the platform deploys an EVM simulator and provides some facilitate services.  

```
+ETH-Blockchain+---------------------------------------------------+
|                                                                  |
|                                                                  |
+--------------+----------------------------------+----------------+
               |                                  |
               |                                  |
       send trx|                                  |deploy
               |                                  |
               |                                  |
       +-------+-------+            +-------------+-----+
 ETH   |   ETH Tools   |            | game    |game     | ETH
 Users |               +----------->+ service |contract | Developers
       |               |            |         |         |
       |               |            |         |         |
       +-------+-------+            +---------+---+-----+
               |                                  |
       send trx|                                  |deploy
               |                                  |
               v                                  v
       +-------+------+---------------------------+--------+
       |   BFSP       |         EVM Simulator              |
       |              |                                    |
       |          platform                                 |
       |              |                                    |
+------------------------------------------------------------------+
|      |              |                                    |       |
|      +--------------+------------------------------------+       |
|                                                                  |
+-+EOS-Blockchain+-------------------------------------------------+
```

## Create ETH address
ETH users can create ETH address exactly the same way as in ETH blockchain, except for the last step, send transaction to BFSP instead of ETH blockchain api. BFSP is a service provided by the platform, which wraps up ETH transaction to EOS transaction, sign with an EOS account, and execute in EVM simulator contract. The EVM simulator will validate transaction data, and call create account action to create an ETH address follows ETH rules. In such way, all transactions, whose sender is the ETH address, pass the validation if and only if the signature is generated by the correct private key owned by the ETH user.

## Deploy game contract
Before deploy game contract, ETH developer needs to create an ETH address in simulator contract. Then the developer can deploy the game contract by send transaction(in ETH format) to BFSP. BFSP wraps ETH transaction data to EOS format, and forward to EVM simulator. The simulator will create a new contract address and set contract code after necessary validations.

## Send transaction
### ETH Users

```
+------------------------------------+-------------+
|          EOS transaction data      |   EOS       |
+----------------------+-------------+ signature   |
| ETH transaction data |ETH signature| by BFSP     |
+----------------------+---------------------------+
```
The ETH user generates ETH transaction data and ETH signature using ETH tools, and sends them to BFSP. BFSP wraps them as an EOS transaction as above and send to EOS blockchain. The simulator firstly validates EOS signature, and then extracts ETH transaction data and ETH signature to execute ETH contract.

### EOS Users

```
+------------------------------------+-------------+
|          EOS transaction data      |   EOS       |
+----------------------+-------------+ signature   |
| ETH transaction data | ETH address | by EOS user |
+----------------------+---------------------------+
```
The EOS users have a different rule when play the ETH games. They need to create an address using their EOS account name and an arbitrary string. As a consequence, they do not have an ETH private key to generate ETH signature. Therefore, they are required to use their EOS account to generate EOS signature and leave ETH signature empty.  

### Resources

In order to execute EOS transactions, someone must pay for the CPU/NET/RAM. In current model, all RAMs are paid by the platform. Moreover, the CPU/NET of ETH users are also paid by the platform. EOS users pay CPU/NET when EOS transaction signatures are generated by their EOS accounts.

Alternative solutions are covered in extension discussion.

## Extension discussion
### Allows non-associated account to associate EOS account
It is technically possible to allow non-associated account to associate an EOS account as they request. But it depends on different use cases.

Non-associated account type is a great choice when ETH users are introduced to EOS. It allows the ETH users to follow their preferred way to manage keys and tools, and more importantly, it ensures the safety of their accounts because the ETH keys are the only way to execute transaction.

If non-associated account is allowed to associate an EOS account, such account will have two ways to execute transactions. One way is by use ETH signature and the other is by use associated EOS account. If associated EOS account is owned by ETH user, it is still safe as usual; but if associated EOS account is owned by the platform, the accounts are not as safe as before, because the platform can execute transactions to the account without the permission of the ETH user. However, in certain circumstances, it is acceptable to allow the platform to execute transactions for users.

In summary, this is an optional feature and can be used as  different assumption applies.

### BFSP, Blind forward service provider
The purpose of BFSP is to allow ETH users to interact with EOS blockchain using only ETH tools. Because lack of EOS key, the ETH key is the actual validation means, and BFSP signature is used to fit EOS rules. Besides, BFSP pays the cost of resources when execute transactions for ETH users.

Instead of forwarding transactions from all accounts, it is possible to filter accounts by validate requests. BFSP can serve only whitelisted accounts to save cost of CPU/NET/RAM.

### Resources, who pays cpu/net/ram
In current model, the platform pays cpu/net/ram for deploy game contracts. It is also possible to enforce the developer to pay all costs. It requires the developer use his/her EOS account to deploy contract, and platform contract needs to modify ram billing account to bill the developer.

Although it is possible to force developer to pay, normally the platform will negotiate with developer and solve this issue off-chain. There are more roles involved in real world in the ecosystem. Users are likely to use wallet app to play games, and the wallet acts as a platform to promote games. The wallet cooperates with KOL and promotion channels to invite more users to games. A lot of off-chain data, such as wallet user info and referrer info, are collected and used in promotion and profit sharing. Therefore, on-chain rules of resource billing is not sufficient to make the ecosystem working, and it might be a better choice to keep it simple and solve the problem off-chain.


